$(document).ready(function () {
    id = 0;
    day = 0;

    $('#saveChallenge').hide();

    $('#addNewDay').click(function () {
        $('ol#daySet').append('<li class="dayForm">' +
        '<div class="well well-lg">' +
        '<input type="text"  class="form-control" placeholder="Optional description..."/>' +
        '<div class="exercises">' +
        '</div>' +
        '<div class="row">' +
        '<div class="col-xs-12 col-sm-12 col-md-8">' +
        '<button type="button" class="addNewExercise btn btn-lg btn-block btn-outline">Add exercise</button>' +
        '</div>' +
        '<div class="col-xs-3 col-sm-3 col-md-1">' +
        '<button class="copyDay btn btn-fitness btn-lg btn-block btn-outline" type="button"><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span></button>' +
        '</div>' +
        '<div class="col-xs-3 col-sm-3 col-md-1">' +
        '<button class="moveDayUp btn btn-fitness btn-lg btn-block btn-outline" type="button"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>' +
        '</div>' +
        '<div class="col-xs-3 col-sm-3 col-md-1">' +
        '<button class="moveDayDown btn btn-fitness btn-lg btn-block btn-outline" type="button"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>' +
        '</div>' +
        '<div class="col-xs-3 col-sm-3 col-md-1">' +
        '<button class="removeDay btn btn-lg btn-block btn-outline" type="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>' +
        '</div>' +
        '</div>' +
        '</div>' +
        '</li>');

        day = day + 1;
        $('#saveChallenge').show();
        $('#challenge-image').hide();
    });
    $('ol#daySet').on('click', '.moveDayUp', function () {
        if ($(this).closest('.dayForm').prev().length)
        {
            $(this).closest('.dayForm').prev().before($(this).closest('.dayForm').clone());
            $(this).closest('.dayForm').remove();
        }
    });
    $('ol#daySet').on('click', '.moveDayDown', function () {
        if ($(this).closest('.dayForm').next().length)
        {
            $(this).closest('.dayForm').next().after($(this).closest('.dayForm').clone());
            $(this).closest('.dayForm').remove();
        }
    });
    $('ol#daySet').on('click', '.moveExerciseDown', function () {
        if ($(this).closest('.exercise-fitness').next().length)
        {
            $(this).closest('.exercise-fitness').next().after($(this).closest('.exercise-fitness').clone());
            $(this).closest('.exercise-fitness').remove();
        }
    });
    $('ol#daySet').on('click', '.moveExerciseUp', function () {
        if ($(this).closest('.exercise-fitness').prev().length)
        {
            $(this).closest('.exercise-fitness').prev().before($(this).closest('.exercise-fitness').clone());
            $(this).closest('.exercise-fitness').remove();
        }
    });
    $('ol#daySet').on('click', '.addNewExercise', function () {
        $(this).closest('.dayForm').find('.exercises').append('<div class="well well-lg exercise-fitness">' +
        '<div class="row">' +
        '<div class="col-xs-12 col-sm-6 col-md-5">' +
        '<select class="selectpicker selectpicker' + id + ' small-margin-bottom" data-width="100%" data-live-search="true">' +
        '<optgroup label="A">' +
        '<option value="1" >A1</option>' +
        '<option value="1" >A2</option>' +
        '</optgroup>' +
        '<optgroup label="B">' +
        '<option value="1" >B1</option>' +
        '<option value="1" >B2</option>' +
        '</optgroup>' +
        '</select>' +
        '</div>' +
        '<div class="col-xs-12 col-sm-6 col-md-4">' +
        '<input type="text" class="form-control small-margin-bottom"  placeholder="Series / time"/>' +
        '</div>' +
        '<div class="col-xs-4 col-sm-4 col-md-1">' +
        '<button class="moveExerciseUp btn btn-fitness btn-small btn-block btn-outline" type="button"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>' +
        '</div>' +
        '<div class="col-xs-4 col-sm-4 col-md-1">' +
        '<button class="moveExerciseDown btn btn-fitness btn-small btn-block btn-outline" type="button"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>' +
        '</div>' +
        '<div class="col-xs-4 col-sm-4 col-md-1">' +
        '<button class="removeExercise btn btn-small btn-block btn-outline" type="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>' +
        '</div>' +
        '</div>' +
        '</div>');
        $('.selectpicker' + id).selectpicker();
        $('.selectpicker' + id).selectpicker('setStyle', 'btn-large', 'add');
        id = id + 1
    });
    $('ol#daySet').on('click', '.removeExercise', function () {
        $(this).closest('.exercise-fitness').remove();
    });
    $('ol#daySet').on('click', '.removeDay', function () {
        $(this).closest('.dayForm').remove();
        day = day - 1;

        if( day == 0 ){
          $('#saveChallenge').hide();
          $('#challenge-image').show();
        }
    });
    $('ol#daySet').on('click', '.copyDay', function () {
        $('ol#daySet').append($(this).closest('.dayForm').clone());
        day = day + 1;
    });
});
